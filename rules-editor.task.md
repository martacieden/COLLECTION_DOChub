# –ü–ª–∞–Ω —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª

## üìã –ó–∞–≥–∞–ª—å–Ω–∞ –º–µ—Ç–∞
–°—Ç–≤–æ—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è AI-–∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª –∫–æ–ª–µ–∫—Ü—ñ—ó –ø–µ—Ä–µ–¥ —ó—Ö –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è–º.

---

## ‚úÖ –ß–µ–∫–ª—ñ—Å—Ç —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó

### –ï–¢–ê–ü 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ RulesEditorModal

- [ ] **1.1** –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª `src/components/RulesEditorModal.tsx`
- [ ] **1.2** –î–æ–¥–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç–∏:
  - React hooks (useState)
  - Lucide icons (X, Plus, Trash2, Sparkles)
  - –¢–∏–ø–∏ CollectionRule –∑ App.tsx
  - Toast –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- [ ] **1.3** –°—Ç–≤–æ—Ä–∏—Ç–∏ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `RulesEditorModalProps`:
  - `isOpen: boolean`
  - `onClose: () => void`
  - `onSave: (rules: CollectionRule[]) => void`
  - `initialRules: CollectionRule[]`
  - `matchedDocumentsCount?: number`
- [ ] **1.4** –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RulesEditorModal` –∑ –±–∞–∑–æ–≤–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é

### –ï–¢–ê–ü 2: UI —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞

- [ ] **2.1** –°—Ç–≤–æ—Ä–∏—Ç–∏ Header —Å–µ–∫—Ü—ñ—é:
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫ "AI-Generated Rules"
  - Badge –∑ –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∞–∫—Ç–∏–≤–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "5 active")
  - –¢–µ–∫—Å—Ç –ø—Ä–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "42 documents matched")
  - –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä–∏—Ç—Ç—è (X icon)
- [ ] **2.2** –°—Ç–≤–æ—Ä–∏—Ç–∏ Content —Å–µ–∫—Ü—ñ—é (scrollable):
  - –ó–∞–≥–æ–ª–æ–≤–æ–∫ "CONDITIONAL RULES"
  - –ö–Ω–æ–ø–∫–∞ "+ Add rule" —Å–ø—Ä–∞–≤–∞ –≤—ñ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞
  - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —Å–ø–∏—Å–∫—É –ø—Ä–∞–≤–∏–ª
- [ ] **2.3** –°—Ç–≤–æ—Ä–∏—Ç–∏ Footer —Å–µ–∫—Ü—ñ—é:
  - –ö–Ω–æ–ø–∫–∞ "Cancel" (—Å—ñ—Ä–∞, –∑–ª—ñ–≤–∞)
  - –ö–Ω–æ–ø–∫–∞ "Apply Rules" (—Å–∏–Ω—è, —Å–ø—Ä–∞–≤–∞)

### –ï–¢–ê–ü 3: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç RuleItem –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞

- [ ] **3.1** –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `RuleItem` –∞–±–æ inline —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è –ø—Ä–∞–≤–∏–ª–∞
- [ ] **3.2** –î–æ–¥–∞—Ç–∏ Type dropdown:
  - –û–ø—Ü—ñ—ó: document_type, tags, client, keywords, date_range, vendor
  - –Ü–∫–æ–Ω–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ç–∏–ø—É (–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑ NewCollectionModal.tsx)
  - –ö–æ–ª—å–æ—Ä–æ–≤—ñ badge –¥–ª—è —Ç–∏–ø—ñ–≤
- [ ] **3.3** –î–æ–¥–∞—Ç–∏ Operator dropdown:
  - –û–ø—Ü—ñ—ó: is, contains, equals, not
- [ ] **3.4** –î–æ–¥–∞—Ç–∏ Value input:
  - –¢–µ–∫—Å—Ç–æ–≤–µ –ø–æ–ª–µ –¥–ª—è –∑–Ω–∞—á–µ–Ω–Ω—è
  - Placeholder –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–∏–ø—É –ø—Ä–∞–≤–∏–ª–∞
- [ ] **3.5** –î–æ–¥–∞—Ç–∏ Enabled toggle:
  - Switch –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞
- [ ] **3.6** –î–æ–¥–∞—Ç–∏ Delete button:
  - –Ü–∫–æ–Ω–∫–∞ Trash2
  - –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### –ï–¢–ê–ü 4: –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª

- [ ] **4.1** –î–æ–¥–∞—Ç–∏ state –¥–ª—è –ø—Ä–∞–≤–∏–ª:
  - `const [rules, setRules] = useState<CollectionRule[]>(initialRules)`
- [ ] **4.2** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `updateRuleType(ruleId, newType)`:
  - –û–Ω–æ–≤–ª—é—î —Ç–∏–ø –ø—Ä–∞–≤–∏–ª–∞
  - –°–∫–∏–¥–∞—î value, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
- [ ] **4.3** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `updateRuleOperator(ruleId, newOperator)`:
  - –û–Ω–æ–≤–ª—é—î –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–∞–≤–∏–ª–∞
- [ ] **4.4** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `updateRuleValue(ruleId, newValue)`:
  - –û–Ω–æ–≤–ª—é—î –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞
- [ ] **4.5** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `toggleRuleEnabled(ruleId)`:
  - –ü–µ—Ä–µ–º–∏–∫–∞—î enabled/disabled —Å—Ç–∞–Ω –ø—Ä–∞–≤–∏–ª–∞
- [ ] **4.6** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `deleteRule(ruleId)`:
  - –í–∏–¥–∞–ª—è—î –ø—Ä–∞–≤–∏–ª–æ –∑—ñ —Å–ø–∏—Å–∫—É
- [ ] **4.7** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `addNewRule()`:
  - –î–æ–¥–∞—î –Ω–æ–≤–µ –ø—É—Å—Ç–µ –ø—Ä–∞–≤–∏–ª–æ –¥–æ —Å–ø–∏—Å–∫—É
  - –ì–µ–Ω–µ—Ä—É—î —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID

### –ï–¢–ê–ü 5: –õ–æ–≥—ñ–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –ø—Ä–∞–≤–∏–ª –≤ CollectionDetailView

- [ ] **5.1** –î–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ state –≤ `CollectionDetailView.tsx`:
  - `const [generatedRules, setGeneratedRules] = useState<CollectionRule[]>([])`
  - `const [isRulesModalOpen, setIsRulesModalOpen] = useState(false)`
  - `const [matchedDocCount, setMatchedDocCount] = useState(0)`
- [ ] **5.2** –û–Ω–æ–≤–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `handleGenerateRules`:
  - –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó –∑ `NewCollectionModal.tsx`
  - –ü—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó: –∑–±–µ—Ä–µ–≥—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ state
  - –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
  - –í—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ: `setIsRulesModalOpen(true)`
- [ ] **5.3** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤:
  - –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `matchDocumentToRules` –∑ App.tsx
  - –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º
  - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ `matchedDocCount`

### –ï–¢–ê–ü 6: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª

- [ ] **6.1** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `handleSaveRules` –≤ `CollectionDetailView.tsx`:
  - –ü—Ä–∏–π–º–∞—î –º–∞—Å–∏–≤ –ø—Ä–∞–≤–∏–ª
  - –û–Ω–æ–≤–ª—é—î `collection.rules` –∑ –Ω–æ–≤–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
  - –ó–Ω–∞—Ö–æ–¥–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∏, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª–∞–º
  - –î–æ–¥–∞—î `collectionId` –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
  - –û–Ω–æ–≤–ª—é—î `collection.count`
  - –û–Ω–æ–≤–ª—é—î `collection.documentIds`
  - –ó–∞–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ
  - –ü–æ–∫–∞–∑—É—î toast –ø—Ä–æ —É—Å–ø—ñ—Ö
- [ ] **6.2** –ü–µ—Ä–µ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –≤ `RulesEditorModal` —á–µ—Ä–µ–∑ props:
  - `onSave={handleSaveRules}`
- [ ] **6.3** –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø–µ—Ä–µ–¥ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º:
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —Ö–æ—á–∞ –± –æ–¥–Ω–µ –ø—Ä–∞–≤–∏–ª–æ —É–≤—ñ–º–∫–Ω–µ–Ω–æ
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ
  - –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏, —è–∫—â–æ —î

### –ï–¢–ê–ü 7: –°—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ UX

- [ ] **7.1** –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ —Ä–æ–∑–º—ñ—Ä–∏ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞:
  - –®–∏—Ä–∏–Ω–∞: `max-w-[700px]`
  - –í–∏—Å–æ—Ç–∞: `max-h-[80vh]`
  - Padding: `p-[24px]`
- [ ] **7.2** –î–æ–¥–∞—Ç–∏ —Å–∫—Ä–æ–ª –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç—É:
  - `overflow-y-auto` –¥–ª—è —Å–µ–∫—Ü—ñ—ó –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- [ ] **7.3** –°—Ç–∏–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–æ:
  - –§–æ–Ω: `bg-white` –∞–±–æ `bg-[#f9fafb]`
  - Border: `border border-[#e8e8ec]`
  - Padding: `p-[12px]`
  - Rounded: `rounded-[8px]`
  - Gap –º—ñ–∂ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏: `gap-[8px]`
- [ ] **7.4** –î–æ–¥–∞—Ç–∏ hover –µ—Ñ–µ–∫—Ç–∏:
  - –î–ª—è –∫–Ω–æ–ø–æ–∫ —Ç–∞ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- [ ] **7.5** –î–æ–¥–∞—Ç–∏ –∞–Ω—ñ–º–∞—Ü—ñ—ó:
  - –ü–ª–∞–≤–Ω–µ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è/–∑–∞–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
  - –ê–Ω—ñ–º–∞—Ü—ñ—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª

### –ï–¢–ê–ü 8: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —ñ—Å–Ω—É—é—á–∏–º –∫–æ–¥–æ–º

- [ ] **8.1** –î–æ–¥–∞—Ç–∏ —ñ–º–ø–æ—Ä—Ç `RulesEditorModal` –≤ `CollectionDetailView.tsx`
- [ ] **8.2** –î–æ–¥–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤ JSX:
  ```tsx
  <RulesEditorModal
    isOpen={isRulesModalOpen}
    onClose={() => setIsRulesModalOpen(false)}
    onSave={handleSaveRules}
    initialRules={generatedRules}
    matchedDocumentsCount={matchedDocCount}
  />
  ```
- [ ] **8.3** –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó –ø—Ä–∞—Ü—é—î:
  - –û–Ω–æ–≤–∏—Ç–∏ state –∫–æ–ª–µ–∫—Ü—ñ–π
  - –ó–±–µ—Ä–µ–≥—Ç–∏ –≤ localStorage (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è)
  - –û–Ω–æ–≤–∏—Ç–∏ UI –ø—ñ—Å–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è

### –ï–¢–ê–ü 8.5: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∫–Ω–æ–ø–∫–∏ "Customize" –≤ Fojo Assistant

- [ ] **8.5.1** –î–æ–¥–∞—Ç–∏ prop `onCustomizeClick` –≤ `FojoAssistantPanel`:
  - –¢–∏–ø: `onCustomizeClick?: () => void`
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- [ ] **8.5.2** –ü–µ—Ä–µ–¥–∞—Ç–∏ `onEdit` prop –≤ `SummaryBox`:
  - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É "Customize" —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ —î –ø—Ä–∞–≤–∏–ª–∞ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó
  - –í–∏–∫–ª–∏–∫–∞—Ç–∏ `onCustomizeClick` –ø—Ä–∏ –∫–ª—ñ–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É
- [ ] **8.5.3** –û–Ω–æ–≤–∏—Ç–∏ `SummaryBox` –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–Ω–æ–ø–∫–∏ "Customize":
  - –ó–º—ñ–Ω–∏—Ç–∏ –∫–Ω–æ–ø–∫—É: –∑–∞–º—ñ—Å—Ç—å —ñ–∫–æ–Ω–∫–∏ Pencil –ø–æ–∫–∞–∑–∞—Ç–∏ —Ç–µ–∫—Å—Ç "Customize"
  - –°—Ç–∏–ª—ñ–∑—É–≤–∞—Ç–∏ —è–∫ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –ª—ñ–Ω–∫: `text-[13px] text-[#005be2] hover:underline`
  - –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –∫–Ω–æ–ø–∫—É —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –ø–µ—Ä–µ–¥–∞–Ω–æ `onEdit`
  - –†–æ–∑—Ç–∞—à—É–≤–∞—Ç–∏ —Å–ø—Ä–∞–≤–∞ –≤—ñ–¥ –∑–∞–≥–æ–ª–æ–≤–∫–∞ "Summary"
- [ ] **8.5.4** –í `App.tsx` –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é –≤ `FojoAssistantPanel`:
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `handleOpenRulesEditor` –≤ App.tsx
  - –§—É–Ω–∫—Ü—ñ—è –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –∫–æ–ª–µ–∫—Ü—ñ—ó
  - –ü–µ—Ä–µ–¥–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é —á–µ—Ä–µ–∑ props: `onCustomizeClick={handleOpenRulesEditor}`
- [ ] **8.5.5** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `handleOpenRulesEditor` –≤ App.tsx:
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —á–∏ —î –ø—Ä–∞–≤–∏–ª–∞ –≤ –∫–æ–ª–µ–∫—Ü—ñ—ó
  - –Ø–∫—â–æ —î: –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ –≤ state `generatedRules`
  - –ü—ñ–¥—Ä–∞—Ö—É–≤–∞—Ç–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏
  - –í—ñ–¥–∫—Ä–∏—Ç–∏ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ: `setIsRulesModalOpen(true)`
- [ ] **8.5.6** –ü–µ—Ä–µ–¥–∞—Ç–∏ state —Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ `CollectionDetailView`:
  - `isRulesModalOpen` —Ç–∞ `setIsRulesModalOpen` –∑ App.tsx
  - `handleSaveRules` –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª
  - –ê–±–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –æ–∫—Ä–µ–º–∏–π state –≤ CollectionDetailView

### –ï–¢–ê–ü 9: –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] **9.1** –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø—Ä–∞–≤–∏–ª:
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –ø–æ—Ä–æ–∂–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –æ–ø–µ—Ä–∞—Ç–æ—Ä—ñ–≤
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞ –º—ñ–Ω—ñ–º—É–º –æ–¥–Ω–µ —É–≤—ñ–º–∫–Ω–µ–Ω–µ –ø—Ä–∞–≤–∏–ª–æ
- [ ] **9.2** –î–æ–¥–∞—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫:
  - Try-catch –±–ª–æ–∫–∏
  - –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
- [ ] **9.3** –î–æ–¥–∞—Ç–∏ toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:
  - –£—Å–ø—ñ—à–Ω–µ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª
  - –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—ñ
  - –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è –ø—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –ø—Ä–∞–≤–∏–ª

### –ï–¢–ê–ü 10: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- [ ] **10.1** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –ø—Ä–∞–≤–∏–ª:
  - –†—ñ–∑–Ω—ñ –æ–ø–∏—Å–∏ –∫–æ–ª–µ–∫—Ü—ñ–π
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏—Ö –ø—Ä–∞–≤–∏–ª
- [ ] **10.2** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª:
  - –ó–º—ñ–Ω–∞ —Ç–∏–ø—É –ø—Ä–∞–≤–∏–ª–∞
  - –ó–º—ñ–Ω–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞
  - –ó–º—ñ–Ω–∞ –∑–Ω–∞—á–µ–Ω–Ω—è
  - –£–≤—ñ–º–∫–Ω–µ–Ω–Ω—è/–≤–∏–º–∫–Ω–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª–∞
- [ ] **10.3** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª:
  - –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
  - –ó–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø–æ–ª—ñ–≤
- [ ] **10.4** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª:
  - –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
  - –í–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–∞–≤–∏–ª
- [ ] **10.5** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è:
  - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –ø—Ä–∞–≤–∏–ª –¥–æ –∫–æ–ª–µ–∫—Ü—ñ—ó
  - –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
  - –û–Ω–æ–≤–ª–µ–Ω–Ω—è UI
- [ ] **10.6** –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ edge cases:
  - –ü—É—Å—Ç—ñ –ø—Ä–∞–≤–∏–ª–∞
  - –î—É–±–ª—é–≤–∞–Ω–Ω—è –ø—Ä–∞–≤–∏–ª
  - –ù–µ–≤–∞–ª—ñ–¥–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è

---

## üìê –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª—ñ–≤
```
src/
  components/
    RulesEditorModal.tsx (–Ω–æ–≤–∏–π —Ñ–∞–π–ª)
    CollectionDetailView.tsx (–æ–Ω–æ–≤–ª–µ–Ω–∏–π)
```

### –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
- React hooks (useState, useEffect)
- Lucide-react icons
- Sonner –¥–ª—è toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –Ü—Å–Ω—É—é—á—ñ —Ç–∏–ø–∏ CollectionRule –∑ App.tsx
- –§—É–Ω–∫—Ü—ñ—è matchDocumentToRules –∑ App.tsx

### –ö–ª—é—á–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó
1. `generateRulesFromDescription(description: string): CollectionRule[]`
2. `countMatchingDocuments(rules: CollectionRule[], documents: Document[]): number`
3. `updateCollectionWithRules(collectionId: string, rules: CollectionRule[]): void`

---

## üéØ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó:
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞ —á–µ—Ä–µ–∑ AI
- –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ –ø—Ä–∞–≤–∏–ª–∞–º–∏
- –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏, –¥–æ–¥–∞–≤–∞—Ç–∏, –≤–∏–¥–∞–ª—è—Ç–∏ –ø—Ä–∞–≤–∏–ª–∞
- –ü—Ä–∞–≤–∏–ª–∞ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –¥–æ –∫–æ–ª–µ–∫—Ü—ñ—ó
- –î–æ–∫—É–º–µ–Ω—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –∫–æ–ª–µ–∫—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø—Ä–∞–≤–∏–ª
- UI –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∑ –Ω–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏
- **–ö–Ω–æ–ø–∫–∞ "Customize" –≤ Fojo Assistant –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è**
- **–ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –ø—Ä–∞—Ü—é—î —è–∫ –¥–ª—è –Ω–æ–≤–∏—Ö –ø—Ä–∞–≤–∏–ª (–ø—ñ—Å–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó), —Ç–∞–∫ —ñ –¥–ª—è —ñ—Å–Ω—É—é—á–∏—Ö (—á–µ—Ä–µ–∑ Customize)**

## üîÑ –î–≤–∞ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö –ø—Ä–∞–≤–∏–ª
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –æ–ø–∏—Å –∫–æ–ª–µ–∫—Ü—ñ—ó
2. –ù–∞—Ç–∏—Å–∫–∞—î "Generate rules"
3. AI –≥–µ–Ω–µ—Ä—É—î –ø—Ä–∞–≤–∏–ª–∞
4. –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ –Ω–æ–≤–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
5. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–µ–¥–∞–≥—É—î —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –†–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –ø—Ä–∞–≤–∏–ª
1. –í –∫–æ–ª–µ–∫—Ü—ñ—ó –≤–∂–µ —î –ø—Ä–∞–≤–∏–ª–∞
2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "Customize" –≤ Fojo Assistant
3. –í—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏
4. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ä–µ–¥–∞–≥—É—î —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞—î –∑–º—ñ–Ω–∏

