# –ß–µ–∫–ª–∏—Å—Ç –∑–º—ñ–Ω –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## ‚úÖ –í–ò–ö–û–ù–ê–ù–û

### 1. –ë–∞–∑–æ–≤–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è —Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (High priority)

#### 1.1. Collections = –¥–µ—Ñ–æ–ª—Ç–Ω–∏–π –≤—Ö—ñ–¥ —É Document Hub ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/App.tsx:4592`
- **–ö–æ–¥**: `const [viewMode, setViewMode] = useState<ViewMode>('collections');`
- Collections —î –¥–µ—Ñ–æ–ª—Ç–Ω–∏–º viewMode –ø—Ä–∏ –≤—ñ–¥–∫—Ä–∏—Ç—Ç—ñ Document Hub

#### 1.2. –ß—ñ—Ç–∫–µ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ –∫–æ–ª–µ–∫—Ü—ñ–π ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª–∏**: `src/App.tsx`, `src/components/CollectionDetailView.tsx`, `src/components/CollectionCard.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - Auto –∫–æ–ª–µ–∫—Ü—ñ—ó: badge "Auto" (—Å–∏–Ω—ñ–π, —ñ–∫–æ–Ω–∫–∞ Sparkles)
  - Manual –∫–æ–ª–µ–∫—Ü—ñ—ó: badge "Manual" (—Å—ñ—Ä–∏–π, —ñ–∫–æ–Ω–∫–∞ Folder)
  - –§—É–Ω–∫—Ü—ñ—è `getCollectionType` –≤–∏–∑–Ω–∞—á–∞—î —Ç–∏–ø –Ω–∞ –æ—Å–Ω–æ–≤—ñ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ rules
  - –ù–µ–º–∞—î —ñ—î—Ä–∞—Ä—Ö—ñ—ó –∫–æ–ª–µ–∫—Ü—ñ–π

### 2. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó (Critical)

#### 2.1. –°–ø—Ä–æ—â–µ–Ω–Ω—è —Ñ–ª–æ—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –ß–∞—Å—Ç–∫–æ–≤–æ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/components/NewCollectionModal.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ Collection name - primary input (–æ–±–æ–≤'—è–∑–∫–æ–≤–µ)
  - ‚úÖ Description –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î name (—Ä—è–¥–æ–∫ 324: `const description = collectionName.trim();`)
  - ‚úÖ Rules —Ñ–æ—Ä—Å–∏—Ç—å—Å—è (—Ä—è–¥–æ–∫ 318-321: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ `generatedRules.length === 0`)
  - ‚úÖ Rules editor –∑–∞–≤–∂–¥–∏ –≤–∏–¥–∏–º–∏–π (—Ä—è–¥–æ–∫ 384-537)
  - ‚ö†Ô∏è Description –ø–æ–ª–µ –Ω–µ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ –≤ UI (–∞–ª–µ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —è–∫ –æ–∫—Ä–µ–º–µ –ø–æ–ª–µ)

#### 2.2. Document type ‚Üí Document category ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª–∏**: 
  - `src/components/NewCollectionModal.tsx:485`
  - `src/components/RulesEditorModal.tsx`
  - `src/services/aiRulesGenerator.ts`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**: –ü–µ—Ä–µ–π–º–µ–Ω–æ–≤–∞–Ω–æ "Document type" ‚Üí "Document category" –≤ —É—Å—ñ—Ö –º—ñ—Å—Ü—è—Ö

### 3. Rules & –ª–æ–≥—ñ–∫–∞ –∫–æ–ª–µ–∫—Ü—ñ–π (Critical)

#### 3.1. –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ—Å—Ç—å rules vs manual add ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª–∏**: `src/App.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ –î–æ–∑–≤–æ–ª–µ–Ω–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏ –¥–æ Auto –∫–æ–ª–µ–∫—Ü—ñ–π –≤—Ä—É—á–Ω—É
  - ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ—è—Å–Ω–µ–Ω–Ω—è (badge "Manually added" –∑ tooltip)
  - ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏, —â–æ –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å rules, –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `manuallyAddedDocumentIds`
  - ‚úÖ –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ –∑ Auto –∫–æ–ª–µ–∫—Ü—ñ—ó: –¥–æ–∑–≤–æ–ª–µ–Ω–æ —Ç—ñ–ª—å–∫–∏ –¥–ª—è manually added, –¥–ª—è matching - –ø–æ–º–∏–ª–∫–∞

#### 3.2. –û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ auto-detection ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª–∏**: `src/App.tsx`, `src/components/CollectionDetailView.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ "Processing..." badge –∑ spinner –¥–ª—è Auto –∫–æ–ª–µ–∫—Ü—ñ–π
  - ‚úÖ "Matched by rule X" badge –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –∑ tooltip
  - ‚úÖ Toast –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ–π
  - ‚úÖ –î–µ—Ç–∞–ª—å–Ω—ñ –ø–æ—è—Å–Ω–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ –ø—Ä–∞–≤–∏–ª

### 4. Upload flow (High priority)

#### 4.1. –ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/components/UploadModal.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ 2-step upload flow: select ‚Üí preview ‚Üí uploading
  - ‚úÖ Preview –∫—Ä–æ–∫ –∑ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è–º: title, description, organization, collections, tags
  - ‚úÖ Summary: "This document will be added to: Invoices / Smith family"
  - ‚úÖ Toast —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å 6000ms

#### 4.2. Upload –Ω–µ –º–∞—î –±—É—Ç–∏ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó –∫–æ–ª–µ–∫—Ü—ñ—ó ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/components/UploadModal.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ –ü—Ä–∏–±—Ä–∞–Ω–æ `collectionOrganization` prop
  - ‚úÖ Upload –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ –±—É–¥—å-—è–∫–æ–≥–æ –º—ñ—Å—Ü—è
  - ‚úÖ Collection assignment - –æ–∫—Ä–µ–º–∏–π –∫—Ä–æ–∫ –≤ preview

### 5. Collection view UI (Medium)

#### 5.1. –î–æ–¥–∞—Ç–∏ description –∫–æ–ª–µ–∫—Ü—ñ—ó ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/components/CollectionDetailView.tsx:517-538`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**: Description –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ header –∫–æ–ª–µ–∫—Ü—ñ—ó

#### 5.2. –ü—Ä–∏–±—Ä–∞—Ç–∏ –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/App.tsx:2488-2501`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**: Count –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è Auto –∫–æ–ª–µ–∫—Ü—ñ–π –∑ tooltip

### 6. AI suggestions & AI collections (Medium‚ÄìHigh)

#### 6.1. –ß—ñ—Ç–∫–∏–π —Ç—Ä–∏–≥–µ—Ä AI collections ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª**: `src/App.tsx:2143-2340`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ –§—É–Ω–∫—Ü—ñ—è `generateAISuggestionsFromDocuments` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —ñ—Å–Ω—É—é—á—ñ –¥–∞–Ω—ñ (tags, category, keywords)
  - ‚úÖ Threshold –ª–æ–≥—ñ–∫–∞ (5+ —Å—Ö–æ–∂–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤)
  - ‚úÖ Suggestions –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó —Ç–∞ –ø—Ä–∏ –¥–æ—Å—è–≥–Ω–µ–Ω–Ω—ñ threshold
  - ‚úÖ –ù–µ –ø–µ—Ä–µ—á–∏—Ç—É—î –¥–æ–∫—É–º–µ–Ω—Ç–∏ - –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–µ—à–æ–≤–∞–Ω—ñ –ø–æ–ª—è

#### 6.2. AI collections –º–∞—é—Ç—å –±—É—Ç–∏ —Ä–µ–¥–∞–≥–æ–≤–∞–Ω—ñ –ª—é–¥–∏–Ω–æ—é ‚úÖ
- **–°—Ç–∞—Ç—É—Å**: –í–∂–µ –∑—Ä–æ–±–ª–µ–Ω–æ
- **–§–∞–π–ª–∏**: `src/App.tsx`, `src/components/CollectionDetailView.tsx`
- **–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è**:
  - ‚úÖ Approve/reject suggestions –≤ `AISuggestionPreviewModal`
  - ‚úÖ –í–∏–±—ñ—Ä/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –ø–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º
  - ‚úÖ –Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä "AI suggestion, curated by you" –≤ CollectionDetailView
  - ‚úÖ –ü–æ–ª–µ `isAIGenerated` –¥–ª—è –ø–æ–∑–Ω–∞—á–µ–Ω–Ω—è AI-—Å—Ç–≤–æ—Ä–µ–Ω–∏—Ö –∫–æ–ª–µ–∫—Ü—ñ–π
  - ‚úÖ –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤ –ø—Ä–∞—Ü—é—î –¥–ª—è AI collections

## ‚ö†Ô∏è –ü–û–¢–†–ï–ë–£–Ñ –£–¢–û–ß–ù–ï–ù–ù–Ø

### 2.1. –°–ø—Ä–æ—â–µ–Ω–Ω—è —Ñ–ª–æ—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ—ó
- **–ü—Ä–æ–±–ª–µ–º–∞**: Description –ø–æ–ª–µ –≤—Å–µ —â–µ –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–¥–∏–º–µ –≤ UI (–ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏)
- **–†—ñ—à–µ–Ω–Ω—è**: Description –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ = name, –∞–ª–µ –º–æ–∂–ª–∏–≤–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –ø–æ–ª–µ description —è–∫ –æ–∫—Ä–µ–º–µ –ø–æ–ª–µ –≤ UI

## üìù –ü–†–ò–ú–Ü–¢–ö–ò

- –í—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∑–º—ñ–Ω–∏ –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω–æ
- AI suggestions —Ç–µ–ø–µ—Ä –∑'—è–≤–ª—è—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ threshold –∞–±–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∫–æ–ª–µ–∫—Ü—ñ—ó
- Upload flow –ø–æ–≤–Ω—ñ—Å—Ç—é –ø—Ä–æ–∑–æ—Ä–∏–π –∑ 2-step flow
- Auto/Manual –∫–æ–ª–µ–∫—Ü—ñ—ó —á—ñ—Ç–∫–æ —Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –∑ –≤—ñ–∑—É–∞–ª—å–Ω–∏–º–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏






